
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Portfolio and blog about Artificial Intelligence and Machine Learning
">
      
      
        <meta name="author" content="Sebastien Tadiello">
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="category/artificial-intelligence/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>Blog - ML Engineer's Blog</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../extra1.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="light-green">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#blog" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="ML Engineer&#39;s Blog" class="md-header__button md-logo" aria-label="ML Engineer's Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ML Engineer's Blog
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Blog
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="ML Engineer&#39;s Blog" class="md-nav__button md-logo" aria-label="ML Engineer's Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    ML Engineer's Blog
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    
      
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Archive
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="archive/2025/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2025
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="archive/2024/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2024
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Categories
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Categories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/artificial-intelligence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Artificial Intelligence
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/brms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BRMS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/biology/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Biology
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/chatbot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chatbot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/deep-learning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deep Learning
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/devops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DevOps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/expert-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Expert System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/from-scratch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    From Scratch
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/llm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LLM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/machine-learning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Machine Learning
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/mathematics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mathematics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/memory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Memory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/nlp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NLP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/neural-networks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Neural Networks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/perceptrons/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Perceptrons
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/python/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/tlu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TLU
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="category/testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Testing
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Basics
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Basics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The basics to master
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Mathematics
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Mathematics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../basics/maths/bases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Partie 1: Bases Mathématiques Fondamentales
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../basics/maths/bases2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Partie 2 : Concepts Avancés
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Python
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../basics/python/numpy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction à NumPy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../basics/python/math_python/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bases Mathématiques pour l'IA
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Projets
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Projets
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../projets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Projets
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content" data-md-component="content">
    <div class="md-content__inner">
      <header class="md-typeset">
        <h1 id="blog">Blog</h1>
      </header>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-02-28 00:00:00+00:00">February 28, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/tlu/" class="md-meta__link">TLU</a>, 
              <a href="category/biology/" class="md-meta__link">Biology</a>, 
              <a href="category/mathematics/" class="md-meta__link">Mathematics</a>, 
              <a href="category/python/" class="md-meta__link">Python</a>, 
              <a href="category/artificial-intelligence/" class="md-meta__link">Artificial Intelligence</a></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="introduction-to-threshold-logic-unit-tlu-biology-mathematics-and-python-implementation"><a class="toclink" href="2025/02/28/introduction-to-threshold-logic-unit-tlu-biology-mathematics-and-python-implementation/">Introduction to Threshold Logic Unit (TLU): Biology, Mathematics, and Python Implementation</a></h2>
<h3 id="introduction"><a class="toclink" href="2025/02/28/introduction-to-threshold-logic-unit-tlu-biology-mathematics-and-python-implementation/#introduction">Introduction</a></h3>
<p>Artificial intelligence and neural networks are inspired by biological neurons. One of the simplest artificial neuron models is the <strong>Threshold Logic Unit (TLU)</strong>, which forms the foundation of perceptrons and modern deep learning architectures. In this post, we will explore the biological origins, mathematical formulation, and a practical Python implementation of the <strong>TLU</strong>. That's a great starting point to understand artificial neurons and the foundation of deep learning. Don't be afraid by the complexity, it's a great place to start.</p>
<h3 id="biological-inspiration"><a class="toclink" href="2025/02/28/introduction-to-threshold-logic-unit-tlu-biology-mathematics-and-python-implementation/#biological-inspiration">Biological Inspiration</a></h3>
<p>The <strong>TLU</strong> is inspired by the behavior of biological neurons. A neuron in the human brain receives inputs from other neurons through synapses. If the combined signal exceeds a certain threshold, the neuron fires and sends a signal to the next neuron.</p>
<p>In simple terms:</p>
<ul>
<li>
<p>Neurons receive <strong>input signals</strong>.</p>
</li>
<li>
<p>Each input is weighted based on its importance.</p>
</li>
<li>
<p>If the <strong>weighted sum</strong> of inputs exceeds a <strong>threshold</strong>, the neuron activates.</p>
</li>
</ul>
<p>This is a <strong>binary activation system</strong>, where the neuron either fires (<code>1</code>) or remains inactive (<code>0</code>).</p>
<p><img alt="TLU" src="assets/tlu.png" /></p>
<ul>
<li><span class="arithmatex">\((a)\)</span> : Biological Neuron</li>
<li><span class="arithmatex">\((b)\)</span> : Artificial Neuron</li>
</ul>
<hr />
<h3 id="mathematical-model"><a class="toclink" href="2025/02/28/introduction-to-threshold-logic-unit-tlu-biology-mathematics-and-python-implementation/#mathematical-model">Mathematical Model</a></h3>
<p>A <strong>Threshold Logic Unit</strong> (TLU) is mathematically defined as:</p>
<div class="arithmatex">\[
    y = f(w_1 x_1 + w_2 x_2 + \dots + w_n x_n - \theta)
\]</div>
<p>where:
- <span class="arithmatex">\( x_i \)</span> are the input values.
- <span class="arithmatex">\( w_i \)</span> are the corresponding weights.
- <span class="arithmatex">\( \theta \)</span> is the threshold.
- <span class="arithmatex">\( f(z) \)</span> is the step activation function:</p>
<div class="arithmatex">\[
    f(z) = \begin{cases} 
      1 &amp; \text{if } z \geq 0 \\
      0 &amp; \text{otherwise}
    \end{cases}
\]</div>
<p>This function determines whether the neuron fires (<code>1</code>) or stays inactive (<code>0</code>).</p>
<hr />
<h3 id="python-implementation"><a class="toclink" href="2025/02/28/introduction-to-threshold-logic-unit-tlu-biology-mathematics-and-python-implementation/#python-implementation">Python Implementation</a></h3>
<p>Let's implement a simple <strong>Threshold Logic Unit (TLU)</strong> in Python.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="k">def</span><span class="w"> </span><span class="nf">step_function</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="k">return</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="k">def</span><span class="w"> </span><span class="nf">TLU</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">weights</span><span class="p">,</span> <span class="n">threshold</span><span class="p">):</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="n">weighted_sum</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">weights</span><span class="p">)</span> <span class="o">-</span> <span class="n">threshold</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>    <span class="k">return</span> <span class="n">step_function</span><span class="p">(</span><span class="n">weighted_sum</span><span class="p">)</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="c1"># Example usage:</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="n">inputs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>   <span class="c1"># Binary inputs</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="n">weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">])</span>  <span class="c1"># Weight vector</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="n">threshold</span> <span class="o">=</span> <span class="mf">0.7</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="n">output</span> <span class="o">=</span> <span class="n">TLU</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">weights</span><span class="p">,</span> <span class="n">threshold</span><span class="p">)</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;TLU Output: </span><span class="si">{</span><span class="n">output</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></code></pre></div>
<h4 id="explanation"><a class="toclink" href="2025/02/28/introduction-to-threshold-logic-unit-tlu-biology-mathematics-and-python-implementation/#explanation">Explanation:</a></h4>
<ol>
<li>The <code>step_function(x)</code> returns <code>1</code> if <code>x</code> is greater than or equal to zero, otherwise <code>0</code>.</li>
<li>The <code>TLU(inputs, weights, threshold)</code> computes the <strong>weighted sum</strong>, subtracts the threshold, and applies the step function.</li>
<li>We test it with a simple example where <code>inputs = [1, 0, 1]</code>, <code>weights = [0.5, 0.5, 0.5]</code>, and <code>threshold = 0.7</code>.</li>
</ol>
<h3 id="visualization-of-decision-boundary"><a class="toclink" href="2025/02/28/introduction-to-threshold-logic-unit-tlu-biology-mathematics-and-python-implementation/#visualization-of-decision-boundary">Visualization of Decision Boundary</a></h3>
<p>A <strong>TLU</strong> is a <strong>linear classifier</strong>, meaning it can separate data with a straight decision boundary. Let's visualize this boundary using Matplotlib.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="k">def</span><span class="w"> </span><span class="nf">plot_tlu_decision_boundary</span><span class="p">(</span><span class="n">weight</span><span class="p">,</span> <span class="n">threshold</span><span class="p">):</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>    <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">weight</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">threshold</span><span class="p">)</span> <span class="o">/</span> <span class="n">weight</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Decision Boundary&quot;</span><span class="p">)</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>    <span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">)</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>    <span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">)</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>    <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>    <span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">)</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">)</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;TLU Decision Boundary&quot;</span><span class="p">)</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="c1"># Example decision boundary</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="n">weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">])</span>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="n">threshold</span> <span class="o">=</span> <span class="mf">0.2</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="n">plot_tlu_decision_boundary</span><span class="p">(</span><span class="n">weights</span><span class="p">,</span> <span class="n">threshold</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="limitations-of-tlu"><a class="toclink" href="2025/02/28/introduction-to-threshold-logic-unit-tlu-biology-mathematics-and-python-implementation/#limitations-of-tlu">Limitations of TLU</a></h3>
<p>While the <strong>Threshold Logic Unit</strong> is a fundamental concept, it has limitations:
- It can only solve <strong>linearly separable problems</strong> (like AND and OR logic gates).
- It <strong>fails</strong> for problems like XOR, which are <strong>not linearly separable</strong>.
- More advanced models like <strong>Perceptrons</strong> and <strong>Multi-Layer Neural Networks</strong> extend this idea by using different activation functions and multiple layers.</p>
<h3 id="conclusion"><a class="toclink" href="2025/02/28/introduction-to-threshold-logic-unit-tlu-biology-mathematics-and-python-implementation/#conclusion">Conclusion</a></h3>
<p>The <strong>TLU</strong> is a great starting point to understand artificial neurons and the foundation of deep learning. Even though modern neural networks use <strong>non-linear activation functions</strong> like sigmoid, ReLU, and tanh, understanding <strong>TLU</strong> provides fundamental insights into how neurons process information.</p>
<p>In future posts, we will extend this idea to <strong>Perceptrons</strong> and <strong>Neural Networks</strong>.</p>
<hr />
<h4 id="references"><a class="toclink" href="2025/02/28/introduction-to-threshold-logic-unit-tlu-biology-mathematics-and-python-implementation/#references">References</a></h4>
<ul>
<li>Rosenblatt, F. (1958). The Perceptron: A Probabilistic Model for Information Storage and Organization in the Brain.</li>
<li>McCulloch, W. S., &amp; Pitts, W. (1943). A logical calculus of the ideas immanent in nervous activity.</li>
</ul>
<hr />
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-02-27 00:00:00+00:00">February 27, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/brms/" class="md-meta__link">BRMS</a>, 
              <a href="category/llm/" class="md-meta__link">LLM</a>, 
              <a href="category/python/" class="md-meta__link">Python</a>, 
              <a href="category/artificial-intelligence/" class="md-meta__link">Artificial Intelligence</a>, 
              <a href="category/chatbot/" class="md-meta__link">Chatbot</a></li>
        
        
          
          <li class="md-meta__item">
            
              5 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="llm-integration-with-brms-business-rule-management-systems"><a class="toclink" href="2025/02/27/llm-integration-with-brms-business-rule-management-systems/">LLM integration with BRMS (Business Rule Management Systems)</a></h2>
<h3 id="introduction"><a class="toclink" href="2025/02/27/llm-integration-with-brms-business-rule-management-systems/#introduction">Introduction</a></h3>
<ul>
<li>
<p>LLMs (Large Language Models) have revolutionized natural language processing (NLP).</p>
<ul>
<li>Understanding complex structures</li>
</ul>
</li>
<li>
<p>BRMS (Business Rule Management Systems) tools for managing complex business rules. </p>
<ul>
<li>Critical systems</li>
</ul>
</li>
</ul>
<h4 id="but"><a class="toclink" href="2025/02/27/llm-integration-with-brms-business-rule-management-systems/#but">But</a></h4>
<ul>
<li>
<p>LLMs are excellent at understanding and generating text, but lack the rigor to respect strict business rules (Hallucination).</p>
<ul>
<li>Case in point: Air Canada refund problem caused by poorly integrated chatbot.</li>
</ul>
<p><a href="https://www.bbc.com/travel/article/20240222-air-canada-chatbot-misinformation-what-travellers-should-know">Airline held liable for its chatbot giving passenger bad advice - what this means for travellers - BBC</a></p>
</li>
<li>
<p>BRMS too limited for interaction </p>
</li>
</ul>
<h4 id="benefits-of-brms-llm-integration"><a class="toclink" href="2025/02/27/llm-integration-with-brms-business-rule-management-systems/#benefits-of-brms-llm-integration">Benefits of BRMS-LLM integration</a></h4>
<ul>
<li>
<p>Increased compliance: LLM responses aligned with internal policies.</p>
</li>
<li>
<p>Reduced errors: expert system-based decisions.</p>
</li>
<li>
<p>Flexibility: combining the power of LLM with the rigor of BRMS. Complex reasoning</p>
</li>
<li>
<p>Clarification of decision-making processes</p>
</li>
</ul>
<h3 id="architecture"><a class="toclink" href="2025/02/27/llm-integration-with-brms-business-rule-management-systems/#architecture">Architecture</a></h3>
<p><img alt="Architecture" src="assets/architecture.png" />
As you can see from the image above, the chatbot uses LLM to generate responses, but for one specific case, it uses BRMS to provide an expert answer.</p>
<p><img alt="Achi_code" src="assets/archi2.png" />
The architecture works like an agent, using the BRSM as a tool to make a decision in a specific case. It is a kind of artificial intelligence agent that uses function calls.</p>
<h3 id="integration-workflow"><a class="toclink" href="2025/02/27/llm-integration-with-brms-business-rule-management-systems/#integration-workflow">Integration workflow</a></h3>
<p>We will describe a possible method of integrating business decision processes within a chatbot using a BRMS.</p>
<h4 id="decision-process-modeling"><a class="toclink" href="2025/02/27/llm-integration-with-brms-business-rule-management-systems/#decision-process-modeling">Decision process modeling</a></h4>
<p>The decision process in a BRMS system can be modeled as a set of logical rules and conditional actions, often represented by a directed graph or decision tree. This mathematical model can be used to formalize the various stages in the decision-making process, based on inputs (data supplied by the user) and defined business rules.</p>
<p>Consider a set of rules <span class="arithmatex">\(R = \{r_1, r_2, \dots, r_n\}\)</span>, where each rule <span class="arithmatex">\(r_i\)</span> can be represented by a logical implication of the form :</p>
<div class="arithmatex">\[
r_i: \text{If } C_i \rightarrow A_i
\]</div>
<p>where <span class="arithmatex">\(C_i\)</span> is a set of conditions (premises) and <span class="arithmatex">\(A_i\)</span> is an action or decision to be taken if the conditions are met.</p>
<p>The decision process can be described by an algorithm that sequentially evaluates each rule in order of priority <span class="arithmatex">\(P(r_1) &gt; P(r_2) &gt; \dots &gt; P(r_n)\)</span>. For a given input <span class="arithmatex">\(x\)</span>, the decision process determines the rule <span class="arithmatex">\(r_i\)</span> such that the conditions <span class="arithmatex">\(C_i\)</span> are satisfied, and applies the action <span class="arithmatex">\(A_i\)</span>.</p>
<p>Let's formulate this mathematically:</p>
<div class="arithmatex">\[
\text{Find } r_i \text{ such that } x \models C_i \text{ and apply } A_i
\]</div>
<p>where <span class="arithmatex">\(x \models C_i\)</span> means that <span class="arithmatex">\(x\)</span> satisfies the conditions <span class="arithmatex">\(C_i\)</span>.</p>
<p>If several rules <span class="arithmatex">\(r_i\)</span> and <span class="arithmatex">\(r_j\)</span> are satisfied simultaneously (i.e. <span class="arithmatex">\(x \models C_i\)</span> and <span class="arithmatex">\(x \models C_j\)</span>), then the order of priority <span class="arithmatex">\(P\)</span> determines which action is chosen. This can be expressed as :</p>
<div class="arithmatex">\[
A = A_k \text{ where } k = \arg\max_{i}(P(r_i) \text{ such that } x \models C_i)
\]</div>
<p>This model can be extended by incorporating probabilities associated with each rule, to handle scenarios where the rules are not strictly deterministic. 
Finally, for integration with a wide language model (LLM), these rules can be used to filter or adjust LLM output, ensuring that any response generated conforms to predefined business rules.</p>
<h4 id="decision-process-integration-modeling"><a class="toclink" href="2025/02/27/llm-integration-with-brms-business-rule-management-systems/#decision-process-integration-modeling">Decision process integration modeling</a></h4>
<p>Once the decision process has been modeled, we can integrate it into a chatbot.</p>
<h5 id="information-extraction"><a class="toclink" href="2025/02/27/llm-integration-with-brms-business-rule-management-systems/#information-extraction">Information extraction</a></h5>
<p>First, the model extracts the relevant information from the user input text <span class="arithmatex">\(x\)</span>. Suppose the input is of the form: <em>"Manon's insurance, she's 34 and lives in Paris ”</em>. The aim is to extract the specific information, i.e. surname <span class="arithmatex">\(n\)</span>, first name <span class="arithmatex">\(p\)</span>, age <span class="arithmatex">\(a\)</span>, and address <span class="arithmatex">\(d\)</span>. This process can be modeled by a function <span class="arithmatex">\(f_{ext}\)</span> such that :</p>
<div class="arithmatex">\[
(n, p, a, d) = f_{ext}(x)
\]</div>
<p>where <span class="arithmatex">\(f_{ext}\)</span> is an entity extraction function.</p>
<h5 id="building-the-decision-payload"><a class="toclink" href="2025/02/27/llm-integration-with-brms-business-rule-management-systems/#building-the-decision-payload">Building the decision payload</a></h5>
<p>Once the information has been extracted, it is used to build a <em>payload</em> that will be sent to a BRMS system. The payload is a data structure represented mathematically by a vector <span class="arithmatex">\(\mathbf{v}\)</span> :</p>
<div class="arithmatex">\[
\mathbf{v} = (n, p, a, d, \text{ID}, \text{Amount})
\]</div>
<p>where <span class="arithmatex">\(\text{ID}\)</span> is a relevant identifier and <span class="arithmatex">\(\text{Amount}\)</span> is an initial value.</p>
<h5 id="business-rule-evaluation"><a class="toclink" href="2025/02/27/llm-integration-with-brms-business-rule-management-systems/#business-rule-evaluation">Business rule evaluation</a></h5>
<p>The vector <span class="arithmatex">\(\mathbf{v}\)</span> is sent to a rules engine <span class="arithmatex">\(R\)</span>, represented by a function <span class="arithmatex">\(f_{BRMS}\)</span> :</p>
<div class="arithmatex">\[
\text{Decision} = f_{BRMS}(\mathbf{v})
\]</div>
<p>where decision is the BRMS output after rule evaluation.</p>
<h5 id="validation-and-response"><a class="toclink" href="2025/02/27/llm-integration-with-brms-business-rule-management-systems/#validation-and-response">Validation and Response</a></h5>
<p>Finally, the decision is validated and a response is constructed:</p>
<div class="arithmatex">\[
\text{Response} = f_{resp}(\text{Decision})
\]</div>
<p>If an error is detected:</p>
<div class="arithmatex">\[
\text{Error} = f_{err}(\text{Decision})
\]</div>
<h5 id="process-summary"><a class="toclink" href="2025/02/27/llm-integration-with-brms-business-rule-management-systems/#process-summary">Process summary</a></h5>
<div class="arithmatex">\[
(n, p, a, d) \xrightarrow{f_{ext}} \mathbf{v} \xrightarrow{f_{BRMS}} \text{Decision} \xrightarrow{f_{resp}} \text{Response}
\]</div>
<h4 id="integration-proposal"><a class="toclink" href="2025/02/27/llm-integration-with-brms-business-rule-management-systems/#integration-proposal">Integration Proposal</a></h4>
<h5 id="api-integration"><a class="toclink" href="2025/02/27/llm-integration-with-brms-business-rule-management-systems/#api-integration">API integration</a></h5>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">payload_construction</span><span class="p">(</span><span class="n">nom</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">prenom</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span><span class="n">age</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span><span class="n">adresse</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">maisonPrice</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="n">sinistre</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Incendie&quot;</span><span class="p">):</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>        <span class="s2">&quot;personne&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">prenom</span><span class="p">,</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>            <span class="s2">&quot;lastName&quot;</span><span class="p">:</span> <span class="n">nom</span><span class="p">,</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>            <span class="s2">&quot;address&quot;</span><span class="p">:</span> <span class="n">adresse</span><span class="p">,</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>            <span class="s2">&quot;disaster&quot;</span><span class="p">:</span> <span class="n">sinistre</span><span class="p">,</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>            <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="n">age</span><span class="p">,</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>            <span class="s2">&quot;maisonPrice&quot;</span><span class="p">:</span> <span class="n">maisonPrice</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>            <span class="p">}</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>        <span class="p">}</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>    <span class="k">return</span> <span class="n">payload</span>
</span></code></pre></div>
<h5 id="extract-information-from-user-input"><a class="toclink" href="2025/02/27/llm-integration-with-brms-business-rule-management-systems/#extract-information-from-user-input">Extract information from user input</a></h5>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">brmsCall</span><span class="p">(</span><span class="n">user_input</span><span class="p">:</span><span class="nb">str</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">str</span><span class="p">:</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>    <span class="n">request</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>                <span class="s2">&quot;Prompt + few shot learning: &quot;</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>                <span class="s2">&quot;Voici la phrase cible: &quot;</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">user_input</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>                <span class="p">)</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>    <span class="n">elements</span> <span class="o">=</span> <span class="n">ollama</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;mistral:latest&quot;</span><span class="p">,</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>        <span class="n">prompt</span><span class="o">=</span><span class="n">request</span><span class="p">,</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>        <span class="n">stream</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>        <span class="n">options</span><span class="o">=</span> <span class="p">{</span><span class="s1">&#39;temperature&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>    <span class="p">)</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>    <span class="n">elements2</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[^a-zA-Z0-9;]&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">elements</span><span class="p">[</span><span class="s2">&quot;response&quot;</span><span class="p">])</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>    <span class="n">elements3</span> <span class="o">=</span> <span class="p">[</span><span class="n">elem</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">elements2</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">elem</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>    <span class="n">payload</span> <span class="o">=</span> <span class="n">pc</span><span class="o">.</span><span class="n">payload_construction</span><span class="p">(</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>        <span class="n">nom</span><span class="o">=</span><span class="n">elements3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">elements3</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">elements3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>        <span class="n">prenom</span><span class="o">=</span><span class="n">elements3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">elements3</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">elements3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>        <span class="n">age</span><span class="o">=</span><span class="n">extract_number</span><span class="p">(</span><span class="n">elements3</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">elements3</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">elements3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>        <span class="n">adresse</span><span class="o">=</span><span class="n">extract_number</span><span class="p">(</span><span class="n">elements3</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">elements3</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="ow">and</span> <span class="n">elements3</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>        <span class="n">maisonPrice</span><span class="o">=</span> <span class="n">extract_number</span><span class="p">(</span><span class="n">elements3</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">elements3</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">4</span> <span class="ow">and</span> <span class="n">elements3</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="k">else</span> <span class="kc">None</span>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>    <span class="p">)</span>
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>    <span class="n">api</span> <span class="o">=</span> <span class="n">ap</span><span class="o">.</span><span class="n">ApiCall</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s2">&quot;http://localhost:8080/ruleflow&quot;</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">})</span>
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>    <span class="n">test_completion</span><span class="p">,</span> <span class="n">erreur</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">test_arguments</span><span class="p">()</span>
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a>    <span class="k">if</span> <span class="n">erreur</span><span class="p">:</span>
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a>        <span class="n">sentence</span> <span class="o">=</span> <span class="s2">&quot;Tu dois indiquer à ton interlocuteur que tu ne peux pas répondre pour la raison suivante : &quot;</span><span class="p">,</span> <span class="n">test_completion</span><span class="p">,</span> <span class="s2">&quot;Il dois ipérativement te donner toutes les informations dans l&#39;ordre si possible. </span><span class="se">\n\n</span><span class="s2"> Répond uniquement que tu ne peux pas répondre sans ces informations primordiales! Aide toi des raisons données pour expliquer. </span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="__span-1-30"><a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a>        <span class="n">solve</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-1-31"><a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-1-32"><a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a>
</span><span id="__span-1-33"><a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a>        <span class="n">resApi</span><span class="p">:</span><span class="nb">dict</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">call_api</span><span class="p">()</span>  <span class="c1"># Appel API</span>
</span><span id="__span-1-34"><a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a>
</span><span id="__span-1-35"><a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">resApi</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="s1">&#39;res&#39;</span> <span class="ow">in</span> <span class="n">resApi</span><span class="p">:</span>
</span><span id="__span-1-36"><a id="__codelineno-1-36" name="__codelineno-1-36" href="#__codelineno-1-36"></a>            <span class="n">answer</span> <span class="o">=</span> <span class="n">resApi</span><span class="p">[</span><span class="s1">&#39;res&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;montantIndemnisation&#39;</span><span class="p">,</span> <span class="s2">&quot;Indemnisation inconnue&quot;</span><span class="p">)</span>
</span><span id="__span-1-37"><a id="__codelineno-1-37" name="__codelineno-1-37" href="#__codelineno-1-37"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-1-38"><a id="__codelineno-1-38" name="__codelineno-1-38" href="#__codelineno-1-38"></a>            <span class="n">answer</span> <span class="o">=</span> <span class="s2">&quot;Erreur : réponse invalide de l&#39;API&quot;</span>
</span><span id="__span-1-39"><a id="__codelineno-1-39" name="__codelineno-1-39" href="#__codelineno-1-39"></a>
</span><span id="__span-1-40"><a id="__codelineno-1-40" name="__codelineno-1-40" href="#__codelineno-1-40"></a>        <span class="n">sentence</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;D&#39;après les informations renseignées parl&#39;utilisateur, le prix de l&#39;indemnité calculée par le modèle est : </span><span class="si">{</span><span class="n">answer</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-1-41"><a id="__codelineno-1-41" name="__codelineno-1-41" href="#__codelineno-1-41"></a>        <span class="n">solve</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">resApi</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="s1">&#39;res&#39;</span> <span class="ow">in</span> <span class="n">resApi</span>  <span class="c1"># True si la clé &#39;res&#39; est bien présente</span>
</span><span id="__span-1-42"><a id="__codelineno-1-42" name="__codelineno-1-42" href="#__codelineno-1-42"></a>
</span><span id="__span-1-43"><a id="__codelineno-1-43" name="__codelineno-1-43" href="#__codelineno-1-43"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;solve : </span><span class="si">{</span><span class="n">solve</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-1-44"><a id="__codelineno-1-44" name="__codelineno-1-44" href="#__codelineno-1-44"></a>
</span><span id="__span-1-45"><a id="__codelineno-1-45" name="__codelineno-1-45" href="#__codelineno-1-45"></a>    <span class="k">return</span> <span class="n">sentence</span><span class="p">,</span> <span class="n">elements3</span><span class="p">,</span> <span class="n">solve</span>
</span></code></pre></div>
<h5 id="keeping-information-in-memory"><a class="toclink" href="2025/02/27/llm-integration-with-brms-business-rule-management-systems/#keeping-information-in-memory">Keeping information in memory</a></h5>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">assurance_phase</span><span class="p">:</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>    <span class="n">assurance_output</span> <span class="o">=</span> <span class="s2">&quot;Voici le retour du système expert :</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="s2">&quot; + sentence</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>    <span class="k">if</span> <span class="n">solve_statue</span><span class="p">:</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">memoire_contextuel_assurance</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">memoire_contextuel_assurance</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Ces éléments sont à retenir : </span><span class="si">{</span><span class="n">liste_element</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="k">else</span><span class="p">:</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>    <span class="n">assurance_output</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">memoire_contextuel_assurance</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span></code></pre></div>
<h3 id="demo"><a class="toclink" href="2025/02/27/llm-integration-with-brms-business-rule-management-systems/#demo">Demo</a></h3>
<p>This demo is in french :</p>
<video width="320" height="240" controls>
  <source src="assets/demoApp.mp4" type="video/mp4">
</video>

<p>All the code is available on Github:</p>
<ul>
<li>
<p><a href="https://github.com/stadiello/droolsLLM">BRMS part</a></p>
</li>
<li>
<p><a href="https://github.com/stadiello/ChatBotBRMS">Chatbot part</a></p>
</li>
</ul>
<hr />
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-08-05 00:00:00+00:00">August 5, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/llm/" class="md-meta__link">LLM</a>, 
              <a href="category/python/" class="md-meta__link">Python</a>, 
              <a href="category/chatbot/" class="md-meta__link">Chatbot</a>, 
              <a href="category/artificial-intelligence/" class="md-meta__link">Artificial Intelligence</a>, 
              <a href="category/mathematics/" class="md-meta__link">Mathematics</a></li>
        
        
          
          <li class="md-meta__item">
            
              4 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="chatbot-memory"><a class="toclink" href="2024/08/05/chatbot-memory/">ChatBot Memory</a></h2>
<p>Nous présentons ici une approche pour la gestion de la mémoire à court terme dans les chatbots, en utilisant une combinaison de techniques de stockage et de résumé automatique pour optimiser le contexte conversationnel. La méthode introduite repose sur une structure de mémoire dynamique qui limite la taille des données tout en préservant les informations essentielles à travers des résumés intelligents. Cette approche permet non seulement d'améliorer la fluidité des interactions mais aussi d'assurer une continuité contextuelle lors de longues sessions de dialogue. En outre, l'utilisation de techniques asynchrones garantit que les opérations de gestion de la mémoire n'interfèrent pas avec la réactivité du chatbot.</p>
<h2 id="modelisation-mathematique-de-la-gestion-des-conversations"><a class="toclink" href="2024/08/05/chatbot-memory/#modelisation-mathematique-de-la-gestion-des-conversations">Modélisation Mathématique de la Gestion des Conversations</a></h2>
<p>Dans cette section, nous formalisons mathématiquement la gestion de la mémoire de conversation dans le chatbot. La mémoire est structurée comme une liste de paires représentant les échanges entre l'utilisateur et le bot.</p>
<h3 id="structure-de-la-memoire-de-conversation"><a class="toclink" href="2024/08/05/chatbot-memory/#structure-de-la-memoire-de-conversation">Structure de la Mémoire de Conversation</a></h3>
<p>La mémoire de conversation peut être définie comme une liste ordonnée de paires <span class="arithmatex">\((u_i, d_i)\)</span>, où <span class="arithmatex">\(u_i\)</span> représente l'entrée utilisateur et <span class="arithmatex">\(d_i\)</span> la réponse du bot pour le <span class="arithmatex">\(i\)</span>-ième échange. Cette liste est notée <span class="arithmatex">\(\mathcal{C}\)</span> :</p>
<div class="arithmatex">\[
\mathcal{C} = [(u_1, d_1), (u_2, d_2), \ldots, (u_n, d_n)]
\]</div>
<p>où <span class="arithmatex">\(n\)</span> est le nombre total d'échanges dans l'historique actuel.</p>
<h3 id="mise-a-jour-de-la-memoire"><a class="toclink" href="2024/08/05/chatbot-memory/#mise-a-jour-de-la-memoire">Mise à Jour de la Mémoire</a></h3>
<p>Lorsqu'un nouvel échange se produit, une nouvelle paire <span class="arithmatex">\((u_{n+1}, d_{n+1})\)</span> est ajoutée à la mémoire. Si la taille de <span class="arithmatex">\(\mathcal{C}\)</span> dépasse une limite maximale prédéfinie <span class="arithmatex">\(M_{\text{max}}\)</span>, l'échange le plus ancien est retiré :</p>
<div class="arithmatex">\[
\mathcal{C} = 
\begin{cases} 
\mathcal{C} \cup \{(u_{n+1}, d_{n+1})\}, &amp; \text{si } |\mathcal{C}| &lt; M_{\text{max}} \\
(\mathcal{C} \setminus \{(u_1, d_1)\}) \cup \{(u_{n+1}, d_{n+1})\}, &amp; \text{si } |\mathcal{C}| = M_{\text{max}}
\end{cases}
\]</div>
<h3 id="comptage-des-mots"><a class="toclink" href="2024/08/05/chatbot-memory/#comptage-des-mots">Comptage des Mots</a></h3>
<p>Pour gérer l'espace de mémoire et décider quand la compression est nécessaire, nous calculons le nombre total de mots <span class="arithmatex">\(W(\mathcal{C})\)</span> dans la mémoire :</p>
<div class="arithmatex">\[
W(\mathcal{C}) = \sum_{(u_i, d_i) \in \mathcal{C}} (|u_i| + |d_i|)
\]</div>
<p>où <span class="arithmatex">\(|u_i|\)</span> et <span class="arithmatex">\(|d_i|\)</span> sont respectivement le nombre de mots dans <span class="arithmatex">\(u_i\)</span> et <span class="arithmatex">\(d_i\)</span>.</p>
<h3 id="compression-de-la-memoire"><a class="toclink" href="2024/08/05/chatbot-memory/#compression-de-la-memoire">Compression de la Mémoire</a></h3>
<p>Lorsque <span class="arithmatex">\(W(\mathcal{C})\)</span> dépasse un seuil <span class="arithmatex">\(W_{\text{max}}\)</span>, la mémoire est compressée pour maintenir la pertinence du contexte. Cette compression est réalisée par un modèle de résumé <span class="arithmatex">\(\mathcal{S}\)</span>, tel que BART :</p>
<div class="arithmatex">\[
\mathcal{C}_{\text{compressed}} = \mathcal{S}(\mathcal{C})
\]</div>
<p>où <span class="arithmatex">\(\mathcal{C}_{\text{compressed}}\)</span> est la version résumée de la mémoire, réduisant le nombre total de mots tout en préservant l'essence des interactions passées.</p>
<h3 id="integration-dans-le-modele-de-langage"><a class="toclink" href="2024/08/05/chatbot-memory/#integration-dans-le-modele-de-langage">Intégration dans le Modèle de Langage</a></h3>
<p>Le modèle de langage utilise le contexte compressé pour générer des réponses pertinentes. Le prompt <span class="arithmatex">\(P\)</span> utilisé par le modèle est construit comme suit :</p>
<div class="arithmatex">\[
P = f(\mathcal{C}_{\text{compressed}}, \text{contexte})
\]</div>
<p>où <span class="arithmatex">\(\text{contexte}\)</span> est le contexte supplémentaire récupéré à partir d'un pipeline RAG, et <span class="arithmatex">\(f\)</span> est une fonction de concaténation qui prépare le texte pour le modèle.</p>
<p>Cette approche assure que le chatbot dispose toujours d'un contexte conversationnel à jour, permettant des interactions plus naturelles et engageantes avec l'utilisateur.</p>
<h2 id="implementation-du-code-pour-la-gestion-de-la-memoire-dun-chatbot"><a class="toclink" href="2024/08/05/chatbot-memory/#implementation-du-code-pour-la-gestion-de-la-memoire-dun-chatbot">Implémentation du Code pour la Gestion de la Mémoire d'un Chatbot</a></h2>
<p>Dans cette section, nous allons examiner un exemple de code en Python qui illustre la gestion de la mémoire dans un chatbot. Le code utilise PyTorch et les transformers de Hugging Face pour gérer et compresser l'historique des conversations.</p>
<h3 id="preparation-de-lenvironnement"><a class="toclink" href="2024/08/05/chatbot-memory/#preparation-de-lenvironnement">Préparation de l'Environnement</a></h3>
<p>Nous commençons par vérifier si un GPU est disponible, ce qui permet d'accélérer le traitement si nécessaire.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">torch</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">transformers</span><span class="w"> </span><span class="kn">import</span> <span class="n">pipeline</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="k">if</span> <span class="n">torch</span><span class="o">.</span><span class="n">cuda</span><span class="o">.</span><span class="n">is_available</span><span class="p">():</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="n">device</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>    <span class="n">device</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="n">MAX_MEMORY_SIZE</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2000</span>
</span></code></pre></div>
<h3 id="definition-de-la-classe-chatbotmemory"><a class="toclink" href="2024/08/05/chatbot-memory/#definition-de-la-classe-chatbotmemory">Définition de la Classe ChatbotMemory</a></h3>
<p>La classe ChatbotMemory gère l'historique des conversations et effectue des opérations de mise à jour et de compression. Donc à chaques fois que update_memory est appelé, le texte en mémoire est compté et traité au besoin.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">ChatbotMemory</span><span class="p">:</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conv</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]):</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">conversation_history</span> <span class="o">=</span> <span class="n">conv</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">update_memory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_input</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">bot_response</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">conversation_history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;user&#39;: </span><span class="si">{</span><span class="n">user_input</span><span class="si">}</span><span class="s2">, &#39;bot&#39;: </span><span class="si">{</span><span class="n">bot_response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>        <span class="k">if</span> <span class="n">memory_counter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conversation_history</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1000</span><span class="p">:</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">conversation_history</span> <span class="o">=</span> <span class="n">compressed_memory</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conversation_history</span><span class="p">)</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Mémoire compressée.&quot;</span><span class="p">)</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conversation_history</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">MAX_MEMORY_SIZE</span><span class="p">:</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">conversation_history</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Mémoire réduite.&quot;</span><span class="p">)</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>        <span class="k">return</span> <span class="mi">0</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_memory</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">conversation_history</span>
</span></code></pre></div>
<h3 id="compression-et-comptage-de-la-memoire"><a class="toclink" href="2024/08/05/chatbot-memory/#compression-et-comptage-de-la-memoire">Compression et Comptage de la Mémoire</a></h3>
<p>La fonction _get_compressed_memory utilise le modèle BART pour résumer l'historique des conversations.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">_get_compressed_memory</span><span class="p">(</span><span class="n">sentence</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>    <span class="n">summarizer</span> <span class="o">=</span> <span class="n">pipeline</span><span class="p">(</span><span class="s2">&quot;summarization&quot;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;facebook/bart-large-cnn&quot;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">device</span><span class="p">)</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>    <span class="n">summary</span> <span class="o">=</span> <span class="n">summarizer</span><span class="p">(</span><span class="n">sentence</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">min_length</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">do_sample</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>    <span class="k">return</span> <span class="n">summary</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;summary_text&#39;</span><span class="p">]</span>
</span></code></pre></div>
<p>La fonction compressed_memory applique la fonction _get_compressed_memory à chaque segment de l'historique des conversations. Pour cela nous optimisons la procédure en effectuant un traitement par Batch. Cette méthode est dissocié de la fonction _get_compressed_memory de manière à pouvoir introduire de nouvelles méthodes de compression.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">compressed_memory</span><span class="p">(</span><span class="n">conv_hist</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">_get_compressed_memory</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">conv_hist</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">5</span><span class="p">]))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">conv_hist</span><span class="p">),</span> <span class="mi">5</span><span class="p">)]</span>
</span></code></pre></div>
<p>La fonction memory_counter compte le nombre total de mots dans l'historique. (Note qu'il pourrais être interessant de réaliser cette étape avec des tokens plutot que des mots.)</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">memory_counter</span><span class="p">(</span><span class="n">conv_hist</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>    <span class="n">st</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">conv_hist</span><span class="p">)</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
</span></code></pre></div>
<h3 id="conclusion"><a class="toclink" href="2024/08/05/chatbot-memory/#conclusion">Conclusion</a></h3>
<p>Ce code établit un cadre efficace pour la gestion de la mémoire dans un chatbot, en utilisant des techniques de compression pour maintenir un contexte pertinent et en améliorant la performance globale du système. L'utilisation de modèles de résumé comme BART assure que même lorsque la mémoire est compressée, le contexte essentiel est préservé.</p>
<p><a href="https://github.com/stadiello/ShortTerm-memory">Code sur GitHub</a></p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-06-21 00:00:00+00:00">June 21, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/devops/" class="md-meta__link">DevOps</a>, 
              <a href="category/python/" class="md-meta__link">Python</a>, 
              <a href="category/security/" class="md-meta__link">Security</a></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="securite-de-vos-codes"><a class="toclink" href="2024/06/21/s%C3%A9curit%C3%A9-de-vos-codes/">Sécurité de vos codes</a></h2>
<p>La sécurité avec Bandit, un outil d'analyse de sécurité de code pour Python.</p>
<p>🔍 Pourquoi Bandit ?</p>
<p>Analyse automatique : Bandit passe en revue votre code pour détecter les usages courants qui peuvent être dangereux pour la sécurité.</p>
<p>Intégration facile : S'intègre dans vos pipelines CI/CD pour des contrôles de sécurité continus.</p>
<p>Mettre en place Bandit est aussi simple que:</p>
<div class="language-zsh highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>​pip<span class="w"> </span>install<span class="w"> </span>bandit
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>bandit<span class="w"> </span>-r<span class="w"> </span>your_code.py​
</span></code></pre></div>
<p>Ajouter à un pipeline GitHub Action, à la suite des tests unitaires:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nt">​name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Security check​</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nt">​run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bandit -r your_code.py</span>
</span></code></pre></div>
<p>Vous pouvez aussi l'intégrer dans un nouveau workflows en ajoutant un nouveau fichier .yml.</p>
<p>Jetez un œil à l'image jointe pour voir Bandit en action dans un workflow GitHub Actions. Aucune vulnérabilité trouvée, c'est exactement ce que nous voulons voir !</p>
<p><img alt="image" src="assets/1709585808775.jfif" /></p>
<p>Avec Bandit, votre code est surveillé pour éviter les erreurs courantes qui pourraient le compromettre et ce à chaque push ! C'est super pratique et cela doit devenir une habitude.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-06-21 00:00:00+00:00">June 21, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/devops/" class="md-meta__link">DevOps</a>, 
              <a href="category/python/" class="md-meta__link">Python</a>, 
              <a href="category/testing/" class="md-meta__link">Testing</a></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="automatisation-des-tests"><a class="toclink" href="2024/06/21/automatisation-des-tests/">Automatisation des Tests</a></h2>
<p>Vous le savez (enfin j'espère), les tests sont cruciaux pour tous les projets de développement. Mais les exécuter manuellement à chaque fois ? Pas très 2024 ! 🤖</p>
<p>Voici une astuce pour les développeurs soucieux d'efficacité : l'intégration de Pytest avec GitHub Actions.</p>
<p>Pytest est un framework de test pour vos applications Python. Et quand vous combinez cela avec la puissance des GitHub Actions, vous obtenez une suite de tests automatisés qui s'exécutent à chaque push ou pull request, assurant que vos modifications n'introduisent pas de régressions !</p>
<p>Pour configurer une action de base GitHub et exécuter vos tests Pytest, créez un fichier <code>.github/workflows/python-app.yml</code>​ dans votre repo et ajouter votre configuration comme sur mon exemple en photo.</p>
<p><img alt="image" src="assets/unitest.jpeg" /></p>
<p>🚀 Et voilà ! Vos tests se lancent automatiquement, vous offrant une tranquillité d'esprit.</p>
<p>Je suis persuadé que certains d'entre vous utilisent d'autres techniques ou des outils plus performants pour les tests, l'essentiel étant de toujours prévenir son code de toutes formes de régression !</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-04-21 00:00:00+00:00">April 21, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/devops/" class="md-meta__link">DevOps</a>, 
              <a href="category/python/" class="md-meta__link">Python</a></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="la-documentation-technique-et-sphinx"><a class="toclink" href="2024/04/21/la-documentation-technique-et-sphinx/"><h1 class="dic_titre">La documentation technique et Sphinx</h1></a></h2>
<p>Ici, je ne vous parlerai pas du README (qui est un guide rapide), mais plutôt de la documentation technique.</p>
<p>Une documentation claire et accessible est aussi cruciale que le code lui-même. Elle guide les utilisateurs et les contributeurs, facilitant l'utilisation et la contribution au projet.</p>
<p>Voici comment structurer et publier une documentation d'un projet Python, en utilisant Sphinx pour la génération et Read the Docs pour l'hébergement.</p>
<ol>
<li>Structuration du Projet 📂 </li>
</ol>
<p align="justify">
La première étape est d'organiser le projet en suivant les meilleures pratiques, avec des dossiers distincts pour les sources (src/), les tests (tests/), la documentation (docs/) et le script setup.py. Cette structure claire facilite la navigation et la maintenance du projet. (Je ferai un post sur toute cette partie.)
</p>

<ol>
<li>Génération de Documentation avec Sphinx 📖</li>
</ol>
<p>Sphinx transforme les docstrings en une documentation complète et bien formatée.</p>
<p>Nous utilisons des extensions comme autodoc pour générer automatiquement la documentation à partir des docstrings.</p>
<p>1/ Nous installons Sphinx :</p>
<div class="language-zsh highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>pip<span class="w"> </span>install<span class="w"> </span>sphinx
</span></code></pre></div>
<p>2/ Nous créons les dossiers d'initialisation :</p>
<div class="language-zsh highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>sphinx-quickstart<span class="w"> </span>docs
</span></code></pre></div>
<p>3/ Nous nous déplaçons dans docs et nous créons la documentation :</p>
<div class="language-zsh highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nb">cd</span><span class="w"> </span>docs
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>make<span class="w"> </span>html
</span></code></pre></div>
<p>Nous pouvons supprimer la documentation avec :
 <code>zsh
make clean</code></p>
<!-- <div> -->
<ol>
<li>Configuration pour Read the Docs 🌐</li>
</ol>
<P align="justify">
Avec un fichier .readthedocs.yaml, nous configurons le processus de build sur Read the Docs, en spécifiant la version de Python et les dépendances nécessaires. Une fois cela fait, rendez-vous sur ReadTheDoc et sélectionnez le repo contenant votre projet. Cela assure que la documentation est automatiquement mise à jour et accessible en ligne à chaque commit. (Vous trouverez un exemple dans l'image de ce post.)
</p>

<p>Le résultat ? Une documentation en ligne toujours à jour, facilement accessible par les utilisateurs et les contributeurs.</p>
<p align="justify">
La documentation ne doit jamais être une réflexion après coup dans le développement logiciel. Elle est essentielle pour la transparence, l'accessibilité et la réussite à long terme d'un projet.
<p>
    
  </div>
</article>
      
      
        
          



<nav class="md-pagination">
  
</nav>
        
      
    </div>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright © 2024 Sebastien Tadiello
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/sebastien-t-ababa2128/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/stadiello" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://scholar.google.com/citations?view_op=list_works&hl=fr&user=EkjvvMIAAAAJ" target="_blank" rel="noopener" title="scholar.google.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M390.9 298.5s0 .1.1.1c9.2 19.4 14.4 41.1 14.4 64C405.3 445.1 338.5 512 256 512s-149.3-66.9-149.3-149.3c0-22.9 5.2-44.6 14.4-64 1.7-3.6 3.6-7.2 5.6-10.7q6.6-11.4 15-21.3c27.4-32.6 68.5-53.3 114.4-53.3 33.6 0 64.6 11.1 89.6 29.9 9.1 6.9 17.4 14.7 24.8 23.5 5.6 6.6 10.6 13.8 15 21.3 2 3.4 3.8 7 5.5 10.5zm26.4-18.8c-30.1-58.4-91-98.4-161.3-98.4s-131.2 40-161.3 98.4L0 202.7 256 0l256 202.7-94.7 77.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "content.code.select", "content.code.annotate"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.92b07e13.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://gc.zgo.at/count.js"></script>
      
    
  </body>
</html>